{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "version": "1.0.0",
  "skill": "tdd-enforcer",
  "description": "TDD Enforcer hook configuration for enforcing RED-GREEN-REFACTOR cycle",
  "hooks": {
    "pre_tool_use": {
      "enabled": true,
      "description": "Intercept Write/Edit tool calls to enforce TDD rules",
      "rules": [
        {
          "id": "no_test_before_code",
          "severity": "warning",
          "condition": {
            "file_pattern": "**/*.{py,js,ts,dart,java,go}",
            "exclude_pattern": "**/test*/**,**/*_test.*,**/*.test.*",
            "test_exists": false
          },
          "action": {
            "message": "‚ö†Ô∏è TDD Rule Violation: Writing source code without corresponding test",
            "suggestion": "1. Create failing test first (RED phase)\n2. Run test to confirm failure\n3. Then write implementation code"
          }
        },
        {
          "id": "extend_after_green",
          "severity": "warning",
          "condition": {
            "all_tests_passing": true,
            "adding_new_functionality": true
          },
          "action": {
            "message": "‚ö†Ô∏è TDD Rule: Tests are passing. Add new test before extending functionality",
            "suggestion": "Write a new failing test for the additional feature"
          }
        },
        {
          "id": "refactor_without_tests",
          "severity": "info",
          "condition": {
            "editing_code": true,
            "tests_not_run_recently": true
          },
          "action": {
            "message": "‚ÑπÔ∏è TDD Reminder: Run tests during refactoring to ensure no regressions",
            "suggestion": "Run tests after each refactor step"
          }
        }
      ]
    },
    "pre_delete": {
      "enabled": true,
      "description": "Prevent deletion of tests with dependencies",
      "rules": [
        {
          "id": "delete_test_with_dependency",
          "severity": "error",
          "condition": {
            "file_pattern": "**/test*/**,**/*_test.*,**/*.test.*",
            "has_code_dependency": true
          },
          "action": {
            "message": "üö´ Cannot delete test: Source code depends on this test",
            "suggestion": "1. Remove dependent code first\n2. Then delete the test",
            "list_dependencies": true
          }
        }
      ]
    }
  },
  "language_mappings": {
    "python": {
      "test_patterns": ["test_*.py", "*_test.py"],
      "source_patterns": ["*.py"]
    },
    "javascript": {
      "test_patterns": ["*.test.js", "*.spec.js"],
      "source_patterns": ["*.js"]
    },
    "typescript": {
      "test_patterns": ["*.test.ts", "*.spec.ts"],
      "source_patterns": ["*.ts"]
    },
    "dart": {
      "test_patterns": ["*_test.dart"],
      "source_patterns": ["*.dart"]
    },
    "java": {
      "test_patterns": ["*Test.java"],
      "source_patterns": ["*.java"]
    },
    "go": {
      "test_patterns": ["*_test.go"],
      "source_patterns": ["*.go"]
    }
  },
  "skip_patterns": [
    "**/*.md",
    "**/*.json",
    "**/*.yaml",
    "**/*.yml",
    "**/config/**",
    "**/migrations/**",
    "**/fixtures/**",
    "**/mock*/**"
  ],
  "strict_mode": false,
  "allow_bypass": true
}
