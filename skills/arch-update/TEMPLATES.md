# 架构文档模板集合

> **适用**: architecture-doc-updater skill
> **版本**: v4.5
> **最后更新**: 2025-12-11

本文档提供 v4.5 架构文档管理系统的标准模板。

---

## 📄 代码目录架构文档模板

### 适用范围
- 代码目录中的架构文档（大写+下划线命名）
- L0/L1/L2 各级别架构文档

### 行数限制
- **主目录文档** (L0): ≤150行
- **子目录文档** (L1/L2): 100-200行

### 完整模板

```markdown
# [模块名称]架构

## 🤖 AI快速索引
- **文档类型**: [架构文档/子模块架构]
- **模块类型**: [业务逻辑/API/数据/测试]
- **核心功能**: [一句话功能描述]
- **关键文件**: [3-5个核心文件]
- **主要依赖**: [关键依赖关系]
- **版本**: X.Y.Z
- **创建时间**: YYYY-MM-DDTHH:mm:ss+08:00
- **更新时间**: YYYY-MM-DDTHH:mm:ss+08:00
- **作者**: [作者/团队]
- **状态**: production

## 🎯 核心价值
[30字以内的价值描述]

## 📄 文件架构

### [文件组1名称]
**功能边界**: [明确的职责范围]
**核心价值**: [该组的独特价值]
- `file1.py` - [功能描述] ⭐新增
- `file2.py` - [功能描述]
- ~~`old_file.py` - [功能描述]~~ ❌已删除

### [文件组2名称]
**功能边界**: [明确的职责范围]
**核心价值**: [该组的独特价值]
- `file3.py` - [功能描述]

## ✅ 质量指标
- **[指标1]**: [具体标准]
- **[指标2]**: [具体标准]

## 🔗 依赖关系
- **上级模块**: [父模块路径]
- **依赖模块**: [本模块依赖的其他模块]
- **被依赖**: [依赖本模块的其他模块]

## 💡 关键设计决策
1. **[决策1]** - [为什么这样设计]
2. **[决策2]** - [技术选型理由]
3. **[决策3]** - [架构权衡考虑]

## 📊 覆盖统计
- **总文件数**: X个
- **文档覆盖率**: 100%
- **主要技术**: [使用的技术栈]

## 📝 版本历史
| 版本 | 时间 | 类型 | 变更内容 |
|------|------|------|----------|
| X.Y.Z | YYYY-MM-DDTHH:mm:ss | [类型] | [说明] |
```

### 关键要求

| 要求 | 规则 |
|------|------|
| **行数限制** | 主目录≤150行，子目录100-200行 |
| **代码块限制** | ≤10行 |
| **核心价值** | ≤30字 |
| **设计决策** | ≥3项 |
| **文件覆盖** | 100% |
| **时间格式** | ISO 8601精确到秒 |

---

## 📋 索引文档模板 (INDEX)

### 适用范围
- 端根目录的 `ARCHITECTURE_DOCS_INDEX.md`
- 手动创建，基于 TREE 文档数据

### 完整模板

```markdown
# [端名称]架构文档索引

## 🤖 AI快速索引
- **文档类型**: 端级架构索引
- **版本**: X.Y.Z
- **创建时间**: YYYY-MM-DDTHH:mm:ss+08:00
- **更新时间**: YYYY-MM-DDTHH:mm:ss+08:00
- **文档总数**: X个（从TREE文档读取，排除archived目录）
- **规范版本**: v4.5

## 🎯 核心价值
[30字以内描述该端架构特点]

## 🔍 快速导航
### ⚡ AI快速决策矩阵
| 场景 | 立即行动 | 详细文档 |
|------|---------|----------|
| **了解总体架构** | 查看L0层级文档 | [端名_ARCHITECTURE.md] |
| **查找特定模块** | 查看完整文档树 | [ARCHITECTURE_DOCS_TREE.md] |

### 📊 架构层级统计
| 层级 | 定义 | 数量 | 健康 | 待更新 | 说明 |
|------|------|------|------|--------|------|
| **L0** | 端级架构 | X个 | X (100%) | 0 (0%) | ... |
| **L1** | 模块架构 | X个 | X (100%) | 0 (0%) | ... |
| **L2** | 组件架构 | X个 | X (100%) | 0 (0%) | ... |

## 🌳 文档树
### 📁 自动生成文档树
- **文档树文件**: [ARCHITECTURE_DOCS_TREE.md](./ARCHITECTURE_DOCS_TREE.md)
- **生成工具**: `python scripts/architecture/python/arch_tree_generate.py --target [端名]`
- **最后更新**: [从TREE文档元信息中读取]
- **数据源**: TREE文档是索引文档统计数据的权威来源

## 📋 主要架构文档
[列出L0/L1文档，L2详见TREE文档]

## 🔗 L2组件依赖关系
[描述核心层、功能层、共享层、测试层的关系]

## 📊 统计摘要
[从TREE文档读取的统计数据]
```

### 关键要求

- ✅ **必须读取 TREE 文档获取数据**，不得手动估算
- ✅ **使用标准模板**，不得自创格式
- ✅ **统计数据来自 TREE**，确保准确性

---

## 🔖 字段说明

### AI快速索引字段

| 字段 | 必需 | 格式 | 说明 |
|------|------|------|------|
| **文档类型** | ✅ | 字符串 | 架构文档/子模块架构/端级架构索引 |
| **模块类型** | 架构文档必需 | 字符串 | 业务逻辑/API/数据/测试 |
| **核心功能** | ✅ | ≤30字 | 一句话功能描述 |
| **关键文件** | ✅ | 列表 | 3-5个核心文件 |
| **主要依赖** | ✅ | 字符串 | 关键依赖关系 |
| **版本** | ✅ | X.Y.Z | 语义化版本 |
| **创建时间** | ✅ | ISO 8601 | 精确到秒 |
| **更新时间** | ✅ | ISO 8601 | 精确到秒 |
| **作者** | ✅ | 字符串 | 作者/团队 |
| **状态** | ✅ | 枚举 | production/development/deprecated |

### 时间格式

**标准**: ISO 8601，精确到秒
```
格式: YYYY-MM-DDTHH:mm:ss+08:00
示例: 2025-12-09T15:45:00+08:00
```

### 版本号格式

**标准**: 语义化版本 (Semantic Versioning)
```
格式: X.Y.Z
  X: 主版本（重大变更）
  Y: 次版本（功能添加）
  Z: 修订版本（Bug修复）

示例: 1.2.3
```

---

## 📐 模板使用指南

### 场景1: 创建新模块架构文档（≥5个文件）

1. **确定层级**: 根据文件数量选择 L1 或 L2
2. **选择模板**:
   - ≥10个文件 → 主目录模板（≤150行）
   - 5-10个文件 → 子目录模板（100-200行）
3. **填写模板**:
   - 复制完整模板
   - 填写所有必需字段
   - 确保核心价值≤30字
   - 列出≥3项设计决策
4. **验证**: 使用验证工具检查格式

### 场景2: 更新现有架构文档

1. **读取当前文档**
2. **更新变更内容**:
   - 新增文件标记 ⭐
   - 删除文件标记 ❌
   - 更新统计数据
3. **更新元数据**:
   - 更新时间（ISO 8601）
   - 版本号+1
4. **添加版本历史记录**

### 场景3: 创建索引文档

1. **生成 TREE 文档**:
   ```bash
   python scripts/architecture/python/arch_tree_generate.py --target [端名]
   ```
2. **读取 TREE 数据**
3. **使用 INDEX 模板**
4. **填写统计数据**（从 TREE 读取）
5. **验证一致性**

---

## ✅ 模板检查清单

使用模板前，确保：

- [ ] 选择了正确的模板（架构文档 vs 索引文档）
- [ ] 确定了正确的层级（L0/L1/L2）
- [ ] 所有必需字段都已填写
- [ ] 时间格式使用 ISO 8601
- [ ] 版本号符合语义化版本规范
- [ ] 核心价值≤30字
- [ ] 设计决策≥3项
- [ ] 文件覆盖率100%
- [ ] 代码块≤10行
- [ ] 文档行数符合限制

---

## 🔗 相关文档

- **主 Skill**: [SKILL.md](./SKILL.md)
- **详细示例**: [EXAMPLES.md](./EXAMPLES.md)
- **验证工具**: [VALIDATION.md](./VALIDATION.md)

---

**最后更新**: 2025-12-11
**规范版本**: v4.5
